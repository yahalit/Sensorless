function out = GetAxisCBit(axis) 
% function out = GetAxisCBit(axis) 
% Get the state of an axis 
% axis: Logical name (1=RW, 2 = LW, 3 = RSTEER , 4 = LSTEER, 5 = NECK ) 

if ( axis < 1 || axis > 5 || ~(fix(axis)==axis))
    error('Axis must be 1 to 5') ; 
end
    cb = FetchObj([hex2dec('2226'),axis+46],GetDataType('long'),'AxisCBit'); 
    out = struct('MotorOn',bitand(cb,1),'MotorReady',bitand(cb,2)/4,'StoEvent',bitand(cb,4)/4 ,...
        'ProfileConverged', bitand(cb,8)/8,'MotionConverged', bitand(cb,16)/16,'MotorFault',bitand(cb,32)/32 ,...
        'QuickStop', bitand(cb,64)/64,'BrakesReleaseCmd', bitand(cb,128)/128,'PotRefFail', bitand(cb,256)/256,...
        'LoopClosureMode', bitand(cb,7*512)/512 ,'SystemMode', bitand(cb,7*2^12)/2^12 ,'CurrentLimit', bitand(cb,2^15)/2^15,...
        'NoCalib', bitand(cb,2^16)/2^16 ,'GyroNotReady', bitand(cb,2^17)/2^17,'RecorderWaitTrigger', bitand(cb,2^18)/2^18,...
        'RecorderActive', bitand(cb,2^19)/2^19,'RecorderReady', bitand(cb,2^20)/2^20 ,'RefGenOn',bitand(cb,2^21)/2^21 ,...
        'TRefGenOn', bitand(cb,2^22)/2^22 ,'GyroAbsent',bitand(cb,2^23)/2^23  ,'ReferenceMode',bitand(cb,7*2^24)/2^24 ,...
        'Pdo3IsPotDiff', bitand(cb,2^27)/2^27,'Configured',bitand(cb,2^28)/2^28 ,'Homed', bitand(cb,2^29)/2^29,...
         'Din1',bitand(cb,2^30)/2^30 ,'Din2', bitand(cb,2^31)/2^31  );
end

